<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8"></meta>
<title>demo</title>
<link rel="stylesheet" href="static/ace/assets/css/font-awesome.css"/>
<style>
</style>
</head>
<body>
<div class="page-header">
    <h1>
        DataTables实例
        <!--<small> 》 dataTableDemo</small>-->
    </h1>
</div>
<div class="row">
    <div class="col-xs-12">
        <div class="table-header">数据列表</div>
        <div>
            <table id="datatable" class="table table-striped table-bordered lTable-font">
            </table>
        </div>
    </div>
</div>
<!-- /row -->
<div class="page-header">
    <h1>
        警告框/提示框
        <!--<small> 》 dataTableDemo</small>-->
    </h1>
</div>
<div class="row">
    <div class="col-xs-12">
        <div>
            <button type="button" class="btn btn-primary" id="btn_warning_modal">警告框</button>
            <button type="button" class="btn btn-primary" id="btn_warning_modal2">警告框2</button>
            <button type="button" class="btn btn-primary" id="btn_pnotify">提示框</button>
        </div>
    </div>
</div>
<div class="page-header">
    <h1>
        新增模态框
        <!--<small> 》 dataTableDemo</small>-->
    </h1>
</div>
<div class="row">
    <div class="col-xs-12">
        <div>
            <button type="button" class="btn btn-primary" id="btn_create_modal">新增记录模态框</button>
        </div>
    </div>
</div>
<div class="page-header">
    <h1>
        文件上传
        <!--<small> 》 dataTableDemo</small>-->
    </h1>
</div>
<div class="row">
    <div class="col-xs-12">
        <div>
            <div class="form-group">
                <div class="col-xs-2">
                    <!-- #section:custom/file-input -->
                    <form id="uploadForm">
                        <input type="file" id="id-input-file-2" name="file"/>
                    </form>
                    <button type="button" class="btn btn-primary" id="btn_upload">上传文件</button>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" tabindex="-1" role="dialog" id="edit_modal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header table-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">添加数据</h4>
            </div>
            <div class="modal-body">
                <!-- PAGE CONTENT BEGINS -->
                <form class="form-horizontal" role="form" id="create_form">
                    <div class="form-group has-error">
                        <label for="form-field-select-5"
                               class="col-xs-12 col-sm-3 col-md-3 control-label no-padding-right">Input
                            with error</label>

                        <div class="col-xs-12 col-sm-5">
                                                                     <span class="block input-icon input-icon-right">
                                                                  <select class="chosen-select form-control"
                                                                          id="form-field-select-5"
                                                                          data-placeholder="请选择...">
                                 <option value=""></option>
                                 <option value="AL">Alabama</option>
                                 <option value="AK">Alaska</option>
                                 <option value="AZ">Arizona</option>
                                 <option value="AR">Arkansas</option>
                                 <option value="CA">California</option>
                                 <option value="CO">Colorado</option>
                                 <option value="CT">Connecticut</option>
                                 <option value="DE">Delaware</option>
                                 <option value="FL">Florida</option>
                                 <option value="GA">Georgia</option>
                                 <option value="HI">Hawaii</option>
                             </select>

                                                                     </span>
                        </div>
                        <div class="help-block col-xs-12 col-sm-reset inline"><i
                                class="ace-icon fa fa-times-circle"></i> <span>Error tip help!</span></div>
                    </div>
                    <div class="form-group">
                        <label for="inputError2" class="col-xs-12 col-sm-3 col-md-3 control-label no-padding-right">Input
                            with error</label>

                        <div class="col-xs-12 col-sm-5">
                                                                     <span class="block input-icon input-icon-right">
                                                                         <input type="text" id="inputError2"
                                                                                class="width-100"/>

                                                                     </span>
                        </div>
                        <div class="help-block col-xs-12 col-sm-reset inline" id="username_span"><span
                                class="middle red">*</span></div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label no-padding-right" for="form-field-1"> Text Field: </label>

                        <div class="col-sm-9">
                            <input type="text" id="form-field-1" placeholder="Username" class="col-xs-10 col-sm-5"
                                   required/>
                            <span class="help-inline col-xs-6 col-sm-7">

                                 </span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-3 control-label no-padding-right" for="form-field-2"> Password
                            Field: </label>

                        <div class="col-sm-9">
                            <input type="password" id="form-field-2" placeholder="Password" class="col-xs-10 col-sm-5"/>
                            <span class="help-inline col-xs-6 col-sm-7">
                                     <span class="middle red">*</span>
                                 </span>
                        </div>
                    </div>
                    <div class="form-group has-error">
                        <label class="col-sm-3 control-label no-padding-right" for="form-field-2"> Textarea:
                        </label>

                        <div class="col-sm-6">
                            <textarea class="form-control limited" id="form-field-3" maxlength="50"></textarea>
                        </div>
                    </div>
                    <div class="form-group has-error">
                        <label class="col-sm-3 control-label no-padding-right" for="form-field-select-4"> Select:
                        </label>

                        <div class="col-sm-6">
                            <select class="chosen-select form-control" id="form-field-select-4"
                                    data-placeholder="请选择...">
                                <option value=""></option>
                                <option value="AL">Alabama</option>
                                <option value="AK">Alaska</option>
                                <option value="AZ">Arizona</option>
                                <option value="AR">Arkansas</option>
                                <option value="CA">California</option>
                                <option value="CO">Colorado</option>
                                <option value="CT">Connecticut</option>
                                <option value="DE">Delaware</option>
                                <option value="FL">Florida</option>
                                <option value="GA">Georgia</option>
                                <option value="HI">Hawaii</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label no-padding-right"> CheckBox:
                        </label>
                        <div class="col-sm-6">
                            <div class="checkbox">
                                <label>
                                    <input name="form-field-checkbox" checked="checked" type="checkbox"/>
                                    <span class="lbl"> choice 1</span>
                                </label></div>
                            <div class="checkbox">
                                <label>
                                    <input name="form-field-checkbox" type="checkbox"/>
                                    <span class="lbl"> choice 1</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label no-padding-right"> CheckBox:
                        </label>
                        <div class="col-sm-6">

                            <div class="radio">
                                <label>
                                    <input name="form-field-radio" checked="checked" type="radio"/>
                                    <span class="lbl"> radio option 1</span>
                                </label>
                            </div>
                            <div class="radio">
                                <label>
                                    <input name="form-field-radio" type="radio"/>
                                    <span class="lbl"> radio option 1</span>
                                </label>
                            </div>

                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label no-padding-right"> CheckBox:
                        </label>
                        <div class="col-sm-6">
                            <div class="switch">
                                <label>
                                    <input name="switch-field-1" class="ace ace-switch ace-switch-4 btn-rotate"
                                           type="checkbox">
                                    <span class="lbl"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label no-padding-right"> Spinner:
                        </label>
                        <div class="col-sm-6">
                            <div class="spinner">
                                <input type="text" class="input-mini" id="spinner"/>
                            </div>
                        </div>
                    </div>
                    <div class="form-group has-error">
                        <label class="col-sm-3 control-label no-padding-right"> DatePicker:
                        </label>
                        <div class="col-sm-6">
                            <div class="input-group">
                                <input class="form-control date-picker" id="id-date-picker-1" type="text"
                                       data-date-format="yyyy-mm-dd"/>
                                <span class="input-group-addon">
                                                                         <i class="fa fa-calendar bigger-110"></i>
                                                                     </span>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取 消</button>
                <button type="button" class="btn btn-success"><i class="fa fa-plus"></i> 添
                    加
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


</body>
</html>
<script type="text/javascript">
    // var scripts =  [null, "static/plugins/dataTables/dist/jquery.dataTables.min.js",null] ;
    $.ace_ajax_finish(function () {
        jQuery(function ($) {

            $("input[name='form-field-checkbox']").iCheck({
                checkboxClass: 'icheckbox_flat-blue'
            }); // 为选择框添加样式

            $("input[name='form-field-radio']").iCheck({
                radioClass: 'iradio_flat-blue'
            }); // 为单选框添加样式

            $("#spinner").ace_spinner({
                value: 0,
                min: 0,
                max: 10,
                step: 1,
                btn_up_class: 'btn-info',
                btn_down_class: 'btn-info'
            })
                .closest('.ace-spinner')

                .on('changed.fu.spinbox', function () {
                    //alert($('#spinner1').val())
                });


            var dataTable = new DataTablePlus({
                'targetId': 'datatable',
                'columns': [
                    {
                        'name': 'name',
                        'title': '名称',
                        'show': true,
                        'detail': true,
                        'edit': true,
                        'inputType': 'text'
                    }, {
                        'name': 'age',
                        'title': '年龄',
                        'show': true,
                        'detail': true,
                        'edit': true,
                        'inputType': 'text'
                    }, {
                        'name': 'username',
                        'title': '昵称',
                        'show': true,
                        'detail': true,
                        'edit': true,
                        'inputType': 'text'
                    }, {
                        'name': 'address',
                        'title': '地址',
                        'show': true,
                        'detail': true,
                        'edit': true,
                        'inputType': 'text'
                    }, {
                        'name': 'other',
                        'title': '其他',
                        'show': true,
                        'detail': true,
                        'edit': true,
                        'inputType': 'textarea'
                    }
                ],
                'responseArguments': {
                    'successMsgCode': 'serverResponseCode',
                    'successCode': 1001,
                    'errorMsgName': 'errorMsg'
                }, // 服务器响应参数
                'url': {
                    'delete': 'demo/data', // 删除提交地址
                    'edit': 'demo/record', // 新增与修改提交地址
                    'data': 'demo/data' // 数据拉取地址
                },
                'modal': {
                    'auto': true /*, // 关闭自动模式
                     'modalId':'edit_modal', // 绑定自定义modal id
                     'clickCallBack':function(call){
                     var btnType = call['btnType'];
                     if(btnType == "create"){
                     console.log("当前点击的是添加按钮");
                     }else{
                     console.log("当前点击的是修改按钮");
                     console.log("data:" + JSON.stringify(call['data']));
                     }
                     }*/ // 定义回调方法
                }, 'rules': {
                    'name': {
                        required: true
                    }
                }
            }); // 设置参数
            dataTable.build(); // 创建表格

            /**
             * 绑定警告框
             */
            $("#btn_warning_modal").click(function () {
                Global.warning("danger样式", "确定要删除此信息吗？", "danger", function () {
                    console.log("删除...");
                });
            });
            /**
             * 绑定警告框2
             */
            $("#btn_warning_modal2").click(function () {
                Global.warning("warning样式", "确定要离开此页面吗？", "warning", function () {
                    console.log("登出...");
                });
            });
            /**
             * 绑定提示框
             */
            $("#btn_pnotify").click(function () {
                Global.notify("success样式", "xxx成功", "success");
                Global.notify("error样式", "xxx失败", "error");
                Global.notify("warning样式", "xxx警告", "warning");
                Global.notify("info样式", "xxx通知", "info");
                Global.notify("dark样式", "xxx通知", "dark");
            });

            /**
             * 绑定新增模态框
             */
            $("#btn_create_modal").click(function () {
                $("#edit_modal").modal();
            });


            // 导入xlsx
            $('#id-input-file-2').ace_file_input({
                no_file: 'No File ...',
                btn_choose: 'Choose',
                btn_change: 'Change',
                droppable: false,
                onchange: null,
                thumbnail: false //| true | large
                //whitelist:'gif|png|jpg|jpeg'
                //blacklist:'exe|php'
                //onchange:''
                //
            });

            $("#btn_upload").click(function () {
                doUpload();
            });
            function doUpload() {
                var formData = new FormData($("#uploadForm")[0]);
                $.ajax({
                    url: 'demo/upload',
                    type: 'POST',
                    data: formData,
       /*             async: false,
                    cache: false,*/
                    contentType: false,
                    processData: false,
                    success: function (data) {
                        alert(data);
                    },
                    error: function (e) {
                    }
                });
            } // 上传文件
        })
    });
</script>